-- Configuration generated by the unifi_video Puppet module

s3sync = {
    maxProcesses = 1,
    onStartup = "/etc/lsyncd/awswrapper.sh sync ^source ^target --storage-class STANDARD_IA",
    onCreate  = "/etc/lsyncd/awswrapper.sh cp ^source^pathname ^target^pathname --storage-class STANDARD_IA",
    onModify  = "/etc/lsyncd/awswrapper.sh cp ^source^pathname ^target^pathname --storage-class STANDARD_IA",
<% if @delete == true -%>
    onDelete  = "/etc/lsyncd/awswrapper.sh rm ^target^pathname",
<% else -%>
    onDelete  = "true", -- delete administratively disabled
<% end -%>
    onMove    = "/etc/lsyncd/awswrapper.sh mv ^target^o.pathname ^target^d.pathname",
}

sync {
    s3sync,
    source = "<%= @source -%>",
    target = "<%= @target -%>",
}


